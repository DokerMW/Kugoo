const menuBody=document.querySelector(".body-main"),menuBtn=document.querySelector(".menu-main__button"),menuBtnIcon=document.querySelector(".btn-icon"),toggleMenu=()=>{document.addEventListener("click",(function(e){e.composedPath().includes(menuBtn)?(menuBody.classList.toggle("_active"),menuBtnIcon.classList.toggle("_active")):e.composedPath().includes(menuBody)||e.composedPath().includes(menuBtn)||(menuBody.classList.remove("_active"),menuBtnIcon.classList.remove("_active"))}))};toggleMenu();const input=document.querySelectorAll("[data-item=placeholder]"),clearPlaceholder=()=>{input.forEach((e=>{const t=e.placeholder;e.addEventListener("focus",(function(){e.placeholder=""})),e.addEventListener("blur",(function(){e.placeholder=t}))}))};clearPlaceholder();const modal=document.querySelector(".modal"),modalItem=document.querySelector(".modal__item"),toggleModal=(e,t,o)=>{document.addEventListener("click",(c=>{(c.target.dataset.toggle==t||c.target.parentNode.dataset.toggle==t||!c.composedPath().includes(o)&&e.classList.contains("_active"))&&(c.preventDefault(),e.classList.toggle("_active"))})),document.addEventListener("keyup",(t=>{"Escape"==t.key&&e.classList.contains("_active")&&e.classList.toggle("_active")}))};toggleModal(modal,"modal",modalItem);const body=document.querySelector("body");document.addEventListener("click",(function(e){modal.classList.contains("_active")||menuBody.classList.contains("_active")&&window.innerWidth<991.98?body.classList.add("_lock"):body.classList.remove("_lock")}));const forms=document.querySelectorAll("form");forms.forEach((e=>{new JustValidate(e,{errorFieldCssClass:"is-invalid"}).addField("input",[{rule:"required",errorMessage:"Укажите телефон"}]).onSuccess((e=>{const t=e.target;(e=>{fetch(t.getAttribute("action"),{method:t.getAttribute("method"),body:e}).then((e=>{e.ok?(t.reset(),modal.classList.remove("_active")):alert("Ошибка: ".response.statusText)}))})(new FormData(t))}))}));const inputTel=document.querySelectorAll("input");inputTel.forEach((e=>{e.addEventListener("focus",(function(){e.classList.contains("_phone")&&(e.classList.add("_mask"),Inputmask("+9 (999) 999-99-99",{placeholder:"+7 (___) __  __  __",clearIncomplete:!0,clearMaskOnLostFocus:!0}).mask(e))}))}));