const menuBody=document.querySelector(".body-main"),menuBtn=document.querySelector(".menu-main__button"),menuBtnIcon=document.querySelector(".btn-icon"),toggleMenu=()=>{document.addEventListener("click",(function(e){e.composedPath().includes(menuBtn)?(menuBody.classList.toggle("_active"),menuBtnIcon.classList.toggle("_active")):e.composedPath().includes(menuBody)||e.composedPath().includes(menuBtn)||(menuBody.classList.remove("_active"),menuBtnIcon.classList.remove("_active"))}))};toggleMenu();const input=document.querySelectorAll("[data-item=placeholder]"),clearPlaceholder=()=>{input.forEach((e=>{const t=e.placeholder;e.addEventListener("focus",(function(){e.placeholder=""})),e.addEventListener("blur",(function(){e.placeholder=t}))}))};clearPlaceholder();const modal=document.querySelector(".modal"),modalThx=document.querySelector(".modal-thx"),modalDialog=document.querySelector(".modal-dialog"),modalThxDialog=document.querySelector(".modal-thx-dialog"),toggleModal=(e,t,o)=>{document.addEventListener("click",(a=>{(a.target.dataset.toggle==t||a.target.parentNode.dataset.toggle==t||!a.composedPath().includes(o)&&e.classList.contains("_active"))&&(a.preventDefault(),e.classList.toggle("_active"))})),document.addEventListener("keyup",(t=>{"Escape"==t.key&&e.classList.contains("_active")&&e.classList.toggle("_active")}))};toggleModal(modal,"modal",modalDialog),toggleModal(modalThx,"modal-thx",modalThxDialog);const body=document.querySelector("body");document.addEventListener("click",(function(e){modal.classList.contains("_active")||menuBody.classList.contains("_active")&&window.innerWidth<991.98?body.classList.add("_lock"):body.classList.remove("_lock")}));const inputTel=document.querySelectorAll("input"),forms=document.querySelectorAll("._send");forms.forEach((e=>{new JustValidate(e,{errorFieldCssClass:"is-invalid"}).addField("[name=usertel]",[{rule:"required",errorMessage:"Укажите телефон"}]).addField("[name=checkbox]",[{rule:"required",errorMessage:" "}]).onSuccess((e=>{const t=e.target;new FormData(t);(e=>{fetch(t.getAttribute("action"),{method:t.getAttribute("method"),body:e}).then((e=>{e.ok?(t.reset(),modal.classList.remove("_active"),modalThx.classList.add("_active")):alert("Ошибка: ".response.statusText)}))})()}))})),inputTel.forEach((e=>{e.addEventListener("focus",(function(){e.classList.contains("_phone")&&(e.classList.add("_mask"),Inputmask("+9 (999) 999-99-99",{placeholder:"+7 (___) __  __  __",clearIncomplete:!0,clearMaskOnLostFocus:!0}).mask(e))}))}));